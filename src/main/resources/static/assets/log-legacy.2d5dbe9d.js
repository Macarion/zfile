!function(){var e=document.createElement("style");e.innerHTML=".zfile-admin-down-link[data-v-10c3cd1c] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-10c3cd1c] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-10c3cd1c] .el-dialog__body{height:80vh;overflow-y:auto}\n",document.head.appendChild(e),System.register(["./base-legacy.80db676a.js","./card-legacy.fb5495a5.js","./zh-cn-legacy.0cfb8976.js","./input-legacy.d4357d07.js","./tag-legacy.1f08e7fb.js","./select-legacy.8f2486f7.js","./scrollbar-legacy.d59f54ed.js","./popper-legacy.5f580b25.js","./table-legacy.3d830c04.js","./checkbox-legacy.859919d7.js","./tooltip-legacy.7c89f687.js","./popover-legacy.0eba315a.js","./button-legacy.96a0013c.js","./SvgIcon-legacy.e95819c9.js","./table-column-legacy.ab1663ac.js","./form-item-legacy.941ea09a.js","./switch-legacy.064c6ed0.js","./useLinkSetting-legacy.51995a9c.js","./admin-storage-legacy.e2ae7fb2.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./admin-setting-legacy.2581b6d7.js","./common-legacy.a65d6776.js","./index-legacy.788c2bbd.js","./route-block-legacy.552b43a8.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.b96630f0.js","./index-legacy.f7653a47.js","./request-legacy.6e67f83a.js","./index-legacy.debf06a1.js","./dayjs.min-legacy.8b8d9024.js","./index-legacy.48482aa3.js","./debounce-legacy.c13da07b.js","./index-legacy.069d16aa.js","./_Uint8Array-legacy.95c66b1a.js","./event-legacy.39ad8904.js","./scroll-legacy.0917397b.js","./validator-legacy.fe6c8b4c.js","./focus-trap-legacy.006936c8.js","./_initCloneObject-legacy.3197cb3f.js","./unit-legacy.d667402b.js","./index-legacy.37d9a349.js"],(function(e){"use strict";var n,t,a,o,l,c,u,i,r,d,f,s,p,g,m,y,b,v,h,w,j,_,x,k,V,C,K,U,z,E,D,A,S,T,L,P,R,F,I,Y,H,M,O,q,G,N,Q,B,J,W,X;return{setters:[function(e){n=e.D,t=e.bf,a=e.r},function(e){o=e.E},function(e){l=e.E,c=e.a,u=e.b,i=e.c,r=e.z,d=e.f,f=e.h,s=e.i,p=e.j},function(){},function(){},function(e){g=e.E,m=e.a},function(){},function(e){y=e.E},function(e){b=e.E,v=e.a},function(){},function(){},function(){},function(){},function(e){h=e._},function(){},function(e){w=e.E,j=e.a},function(e){_=e.E},function(e){x=e.u},function(e){k=e.l},function(e){V=e.t},function(e){C=e.l},function(e){K=e.c},function(e){U=e.G,z=e.r,E=e.o,D=e.a,A=e.f,S=e.j,T=e.e,L=e.m,P=e.u,R=e.k,F=e.P,I=e.F,Y=e.v,H=e.b,M=e.t,O=e.O,q=e.Q,G=e.R},function(e){N=e.b},function(e){Q=e._},function(e){B=e.E},function(e){J=e.E},function(e){W=e.E},function(e){X=e.E},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Z=function(e){return q("data-v-10c3cd1c"),e=e(),G(),e},$={class:"zfile-admin-down-link"},ee={class:"flex justify-between"},ne=Z((function(){return L("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 下载日志 ",-1)})),te={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},ae=Z((function(){return L("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1)})),oe={class:"mt-4"},le={class:"flex justify-between space-x-20"},ce={class:"text-gray-400"},ue={class:"mb-2"},ie={key:0,class:"space-x-2"},re={key:1},de={__name:"log",setup:function(e){var q=x(),G=q.data,N=q.saveData,Q=(q.saveLoading,U({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),Z=function(e){Q.limit=e,Q.page=1,pe()},de=function(e){Q.page=e,pe()},fe=function(){return Q.date instanceof Array?(Q.dateFrom=Q.date[0],Q.dateTo=Q.date[1]):(Q.dateFrom="",Q.dateTo=""),Q},se=z(),pe=function(){d(fe()).then((function(e){se.value=e.data,Q.total=e.dataCount}))};E((function(){pe(),be(),me()}));var ge=z(),me=function(){C().then((function(e){ge.value=e.data}))},ye=z(),be=function(){k().then((function(e){ye.value=e.data}))},ve=z(),he=function(){var e=ve.value.getSelectionRows();0!==e.length?X.confirm("是否确认删除？","提示",{type:"warning"}).then((function(){var n=e.map((function(e){return e.id}));s({ids:n}).then((function(e){W.success("删除成功"),pe()}))})):W.warning("请至少选择一条数据")},we=function(){X.confirm("是否确认删除当前查询条件下的 ".concat(Q.total," 条直链下载日志？(如数量不对，请先点击查询后再用该功能按条件删除)"),"提示",{type:"warning"}).then((function(){p(fe()).then((function(e){W.success("清空成功"),pe()}))}))},je=function(e){V(e).then((function(){W.success("复制成功")}))},_e=function(e){window.open(e)},xe=function(e){var n;return K.removeDuplicateSeparator("".concat(null==ge||null===(n=ge.value)||void 0===n?void 0:n.domain,"/s/").concat(e))},ke=function(e){var n,t;return K.removeDuplicateSeparator("".concat(null==ge||null===(n=ge.value)||void 0===n?void 0:n.domain,"/").concat(null==ge||null===(t=ge.value)||void 0===t?void 0:t.directLinkPrefix,"/").concat(e.storageKey,"/").concat(e.path))};return function(e,d){var s=_,p=g,x=m,k=w,V=B,C=l,K=n,U=j,z=b,E=y,q=J,X=h,fe=c,ge=v,me=u,be=i,Ve=o;return D(),A("div",$,[S(Ve,null,{default:T((function(){return[L("div",ee,[ne,P(G)?(D(),A("div",te,[ae,S(s,{onChange:P(N),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:P(G).recordDownloadLog,"onUpdate:modelValue":d[0]||(d[0]=function(e){return P(G).recordDownloadLog=e})},null,8,["onChange","modelValue"])])):R("",!0)]),L("div",oe,[S(U,{inline:"",modelValue:P(Q),"onUpdate:modelValue":d[8]||(d[8]=function(e){return F(Q)?Q.value=e:null})},{default:T((function(){return[S(k,{label:"存储源"},{default:T((function(){return[S(x,{clearable:"",teleported:!1,modelValue:P(Q).storageKey,"onUpdate:modelValue":d[1]||(d[1]=function(e){return P(Q).storageKey=e}),placeholder:"请选择存储源"},{default:T((function(){return[(D(!0),A(I,null,Y(P(ye),(function(e){return D(),H(p,{key:e.id,label:e.name,value:e.key},{default:T((function(){return[L("div",le,[L("span",null,M(e.name),1),L("span",ce,M(e.type.description),1)])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),S(k,{label:"短链 Key"},{default:T((function(){return[S(V,{modelValue:P(Q).shortKey,"onUpdate:modelValue":d[2]||(d[2]=function(e){return P(Q).shortKey=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"文件路径"},{default:T((function(){return[S(V,{modelValue:P(Q).path,"onUpdate:modelValue":d[3]||(d[3]=function(e){return P(Q).path=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"请求 IP"},{default:T((function(){return[S(V,{modelValue:P(Q).ip,"onUpdate:modelValue":d[4]||(d[4]=function(e){return P(Q).ip=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"UserAgent"},{default:T((function(){return[S(V,{modelValue:P(Q).userAgent,"onUpdate:modelValue":d[5]||(d[5]=function(e){return P(Q).userAgent=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"Referer"},{default:T((function(){return[S(V,{modelValue:P(Q).referer,"onUpdate:modelValue":d[6]||(d[6]=function(e){return P(Q).referer=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"下载时间"},{default:T((function(){return[S(C,{modelValue:P(Q).date,"onUpdate:modelValue":d[7]||(d[7]=function(e){return P(Q).date=e}),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])]})),_:1}),S(k,null,{default:T((function(){return[S(K,{type:"primary",icon:P(t),onClick:pe},{default:T((function(){return[O("查询")]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["modelValue"]),L("div",ue,[S(K,{onClick:he,icon:P(a),type:"danger"},{default:T((function(){return[O("批量删除选中")]})),_:1},8,["icon"]),S(K,{onClick:we,icon:P(a),type:"danger"},{default:T((function(){return[O("删除全部页")]})),_:1},8,["icon"])]),S(ge,{border:"",ref_key:"linkTableRef",ref:ve,size:"large",data:P(se),style:{width:"100%"}},{default:T((function(){return[S(z,{type:"selection",width:"55"}),S(z,{fixed:"",width:"120",label:"存储源名称"},{default:T((function(e){var n;return[S(E,{content:null===(n=e.row.storageType)||void 0===n?void 0:n.description,placement:"right"},{default:T((function(){return[L("span",null,M(e.row.storageName),1)]})),_:2},1032,["content"])]})),_:1}),S(z,{fixed:"",width:"90",align:"center",label:"下载类型"},{default:T((function(e){return[e.row.shortKey?(D(),H(q,{key:0,type:"success"},{default:T((function(){return[O("短链")]})),_:1})):(D(),H(q,{key:1},{default:T((function(){return[O("直链")]})),_:1}))]})),_:1}),S(z,{"min-width":"400","show-overflow-tooltip":!0,prop:"shortKey",label:"下载链接"},{default:T((function(e){return[e.row.shortKey?(D(),A("div",ie,[L("span",null,M(P(xe)(e.row.shortKey)),1),S(X,{onClick:function(n){return P(je)(P(xe)(e.row.shortKey))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),S(X,{onClick:function(n){return P(_e)(P(xe)(e.row.shortKey))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])):(D(),A("div",re,[L("span",null,M(P(ke)(e.row)),1),S(X,{onClick:function(n){return P(je)(P(ke)(e.row))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),S(X,{onClick:function(n){return P(_e)(P(ke)(e.row))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])]))]})),_:1}),S(z,{width:"300","show-overflow-tooltip":!0,prop:"path",label:"文件路径"}),S(z,{width:"100","show-overflow-tooltip":!0,prop:"ip",label:"请求 IP"}),S(z,{width:"250","show-overflow-tooltip":!0,prop:"userAgent",label:"UserAgent"}),S(z,{width:"200","show-overflow-tooltip":!0,prop:"referer",label:"Referer"}),S(z,{width:"155",prop:"createTime",label:"下载时间"}),S(z,{fixed:"right",width:"120",label:"操作"},{default:T((function(e){return[S(fe,{title:"是否确认删除?",onConfirm:function(n){return t=e.row.id,void f(t).then((function(e){W.success("删除成功"),pe()}));var t}},{reference:T((function(){return[S(K,{icon:P(a),type:"danger"},{default:T((function(){return[O("删除")]})),_:1},8,["icon"])]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),S(be,{locale:P(r)},{default:T((function(){return[S(me,{class:"mt-3","page-size":P(Q).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:de,onSizeChange:Z,"current-page":P(Q).page,"onUpdate:currentPage":d[9]||(d[9]=function(e){return P(Q).page=e}),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:P(Q).total},null,8,["page-size","current-page","total"])]})),_:1},8,["locale"])])]})),_:1})])}}};"function"==typeof N&&N(de);e("default",Q(de,[["__scopeId","data-v-10c3cd1c"]]))}}}))}();
